#!/bin/bash

# Firebase Storage CORS Configuration Script
# This script helps configure CORS for Firebase Storage to allow localhost development

echo "Firebase Storage CORS Configuration"
echo "=================================="
echo ""
echo "The file upload is failing due to CORS policy errors."
echo "To fix this, you need to configure CORS in Firebase Storage."
echo ""
echo "Option 1: Using Firebase CLI (Recommended)"
echo "------------------------------------------"
echo "1. Install Firebase CLI if not already installed:"
echo "   npm install -g firebase-tools"
echo ""
echo "2. Login to Firebase:"
echo "   firebase login"
echo ""
echo "3. Initialize Firebase in your project:"
echo "   firebase init storage"
echo ""
echo "4. Deploy storage rules:"
echo "   firebase deploy --only storage"
echo ""
echo "Option 2: Manual CORS Configuration"
echo "-----------------------------------"
echo "1. Go to Firebase Console: https://console.firebase.google.com/"
echo "2. Select your project: skillshare-f8520"
echo "3. Go to Storage > Rules"
echo "4. Make sure the rules allow your learning-sessions path"
echo "5. Go to Storage > Files"
echo "6. Click on the bucket name"
echo "7. Go to Permissions tab"
echo "8. Add CORS configuration for localhost:3000"
echo ""
echo "Option 3: Use Firebase Emulator (For Development)"
echo "------------------------------------------------"
echo "1. Install Firebase CLI: npm install -g firebase-tools"
echo "2. Initialize emulator: firebase init emulators"
echo "3. Start emulator: firebase emulators:start"
echo "4. Update your app to use emulator URLs"
echo ""
echo "Current Error Details:"
echo "- CORS policy blocking requests from localhost:3000"
echo "- Firebase Storage not allowing preflight OPTIONS requests"
echo "- Upload timeout after 30 seconds"
echo ""
echo "After fixing CORS, the file upload should work properly."
